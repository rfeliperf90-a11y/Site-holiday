<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuperar Senha - HOLIDAY Guild</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles-premium.css">
    <link rel="stylesheet" href="auth.css">
</head>
<body>
    <div class="animated-background">
        <div class="smoke-particle smoke-particle-1"></div>
        <div class="smoke-particle smoke-particle-2"></div>
        <div class="smoke-particle smoke-particle-3"></div>
        <div class="smoke-particle smoke-particle-4"></div>
        <div class="smoke-particle smoke-particle-5"></div>
        
        <div class="light-flicker light-1"></div>
        <div class="light-flicker light-2"></div>
        <div class="light-flicker light-3"></div>
        
        <div class="cloud cloud-bg-1"></div>
        <div class="cloud cloud-bg-2"></div>
        <div class="cloud cloud-bg-3"></div>
        <div class="star star-bg-1"></div>
        <div class="star star-bg-2"></div>
        <div class="star star-bg-3"></div>
        <div class="star star-bg-4"></div>
        <div class="star star-bg-5"></div>
    </div>

    <div class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1>RECUPERAR SENHA</h1>
                <p>Vamos ajudar voc� a recuperar sua conta</p>
            </div>

            <!-- Etapa 1: Solicitar Email -->
            <form id="requestResetForm" class="auth-form" style="display: block;">
                <div class="form-group">
                    <label for="email">Email Cadastrado</label>
                    <input type="email" id="email" name="email" required placeholder="seu@email.com">
                    <span class="error-message" id="emailError"></span>
                </div>

                <button type="submit" class="btn-submit">Enviar C�digo</button>
                <span class="error-message" id="requestError"></span>
            </form>

            <!-- Etapa 2: Verificar C�digo -->
            <form id="resetPasswordForm" class="auth-form" style="display: none;">
                
                <!-- Se��o de C�digo -->
                <div id="codeSection" style="display: block;">
                    <div class="form-group">
                        <label for="resetCode">C�digo de Verifica��o</label>
                        <p style="color: #999; font-size: 12px; margin: -10px 0 10px 0;">Insira o c�digo enviado para seu email</p>
                        <input type="text" id="resetCode" maxlength="6" placeholder="000000" required>
                    </div>

                    <div style="text-align: center; margin-top: 15px;">
                        <p id="resetTimer" style="color: #6B46C1; font-size: 14px; margin: 10px 0; font-weight: bold;">V�lido por 15:00</p>
                        <button type="button" id="resendResetBtn" onclick="resendResetCode()" style="background: linear-gradient(135deg, #6B46C1, #EC4899); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; position: relative;">
                            Reenviar Codigo
                        </button>
                        <p id="resendCooldownTimer" style="display: none; margin-top: 8px; font-size: 12px; color: #9CA3AF;">Aguarde 30s para reenviar.</p>
                    </div>
                    
                    <span class="error-message" id="resetError" style="display: block; text-align: center; margin-top: 15px;"></span>
                </div>

                <!-- Se��o de Nova Senha (aparece s� ap�s validar c�digo) -->
                <div id="passwordSection" style="display: none;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <p style="color: #4ade80; font-size: 14px;">C�digo validado com sucesso!</p>
                    </div>

                    <div class="form-group">
                        <label for="newPassword">Nova Senha</label>
                        <input type="password" id="newPassword" required placeholder="M�nimo 6 caracteres">
                    </div>

                    <div class="form-group">
                        <label for="confirmNewPassword">Confirmar Senha</label>
                        <input type="password" id="confirmNewPassword" required placeholder="Confirme sua nova senha">
                    </div>

                    <button type="submit" id="resetSubmit" class="btn-submit">Alterar Senha</button>
                    
                    <button type="button" id="backToCodeBtn" onclick="backToCodeVerification()" style="background: transparent; color: #6B46C1; border: 1px solid #6B46C1; padding: 10px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; width: 100%;">Voltar</button>
                </div>
            </form>

            <div class="auth-divider">ou</div>

            <div class="auth-footer">
                <p><a href="login.html">Voltar para login</a></p>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 HOLIDAY Guild. Todos os direitos reservados.</p>
            <p>Grupo Guild Holiday criado em 2014</p>
        </div>
    </footer>

    <script src="site-config.js"></script>
    <script src="auth-api.js"></script>
    <script src="auth-manager.js"></script>
    <script src="forgot-password.js"></script>
</body>
</html>
